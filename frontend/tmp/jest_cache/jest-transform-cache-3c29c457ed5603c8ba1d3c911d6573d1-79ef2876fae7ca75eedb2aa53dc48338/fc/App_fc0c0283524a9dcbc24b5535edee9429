90ae627ea5367edc6f73d7f7c9c05052
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// src/App.tsx
const react_1 = require("react");
const GameBoard_1 = require("./components/GameBoard");
const PuzzleSelector_1 = require("./components/PuzzleSelector");
const PuzzleCreator_1 = require("./components/PuzzleCreator");
require("./styles/App.css");
const MOCK_PUZZLE = {
    initialGrid: [[0, 1], [1, 0]],
    targetGrid: [[1, 1], [1, 1]],
    formulas: ['A+B'],
};
const App = () => {
    const [view, setView] = (0, react_1.useState)('PUZZLE_SELECT');
    const [selectedPuzzleId, setSelectedPuzzleId] = (0, react_1.useState)(1); // Default to puzzle 1 for dev
    const [puzzleData, setPuzzleData] = (0, react_1.useState)(null);
    const [showSuccessModal, setShowSuccessModal] = (0, react_1.useState)(false);
    const [error, setError] = (0, react_1.useState)(null);
    // Always use backend or mock data, with robust error handling
    (0, react_1.useEffect)(() => {
        if (selectedPuzzleId !== null) {
            setError(null);
            fetch(`http://localhost:5000/puzzle/${selectedPuzzleId}`)
                .then(res => {
                if (!res.ok)
                    throw new Error('Backend error');
                return res.json();
            })
                .then(data => {
                setPuzzleData({
                    initialGrid: data.initial_grid,
                    targetGrid: data.target_grid,
                    formulas: data.formulas,
                });
                setView('PUZZLE_PLAY');
            })
                .catch((err) => {
                console.error('Falling back to mock puzzle:', err);
                setPuzzleData(MOCK_PUZZLE);
                setView('PUZZLE_PLAY');
                setError('Backend unavailable, using mock puzzle.');
            });
        }
    }, [selectedPuzzleId]);
    const handlePuzzleSelect = (puzzleId) => setSelectedPuzzleId(puzzleId);
    const handlePuzzleSolved = () => {
        setShowSuccessModal(true);
        setTimeout(() => {
            setShowSuccessModal(false);
            setView('PUZZLE_SELECT');
            setSelectedPuzzleId(1); // Always default to puzzle 1 for dev
            setPuzzleData(null);
        }, 3000);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "app-container", "data-testid": "app-container", children: [(0, jsx_runtime_1.jsxs)("header", { className: "app-header", children: [(0, jsx_runtime_1.jsx)("div", { className: "app-title", onClick: () => setView('PUZZLE_SELECT'), children: "MuMu Game" }), (0, jsx_runtime_1.jsxs)("nav", { className: "app-nav", children: [(0, jsx_runtime_1.jsx)("button", { className: view === 'PUZZLE_SELECT' ? 'active' : '', onClick: () => setView('PUZZLE_SELECT'), children: "Play" }), (0, jsx_runtime_1.jsx)("button", { className: view === 'PUZZLE_CREATE' ? 'active' : '', onClick: () => setView('PUZZLE_CREATE'), children: "Create" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "app-toggles", children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "toggle-backend", onClick: () => { }, children: "Backend/Mock" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "toggle-darkmode", onClick: () => { }, children: "Dark Mode" })] })] }), (0, jsx_runtime_1.jsxs)("main", { className: "app-content", children: [error && ((0, jsx_runtime_1.jsx)("div", { role: "alert", style: { color: 'red', marginBottom: 16 }, children: error })), view === 'PUZZLE_SELECT' && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(PuzzleSelector_1.default, { onSelectPuzzle: handlePuzzleSelect }), (0, jsx_runtime_1.jsx)("div", { className: "action-buttons", children: (0, jsx_runtime_1.jsx)("button", { onClick: () => setView('PUZZLE_CREATE'), children: "Create Your Own Puzzle" }) })] })), view === 'PUZZLE_PLAY' && !puzzleData && ((0, jsx_runtime_1.jsx)("div", { className: "loading", children: "Loading puzzle..." })), view === 'PUZZLE_PLAY' && puzzleData && ((0, jsx_runtime_1.jsx)(GameBoard_1.default, { puzzleId: selectedPuzzleId, initialGrid: puzzleData.initialGrid, targetGrid: puzzleData.targetGrid, formulas: puzzleData.formulas, onSolve: handlePuzzleSolved })), view === 'PUZZLE_CREATE' && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(PuzzleCreator_1.default, {}), (0, jsx_runtime_1.jsx)("div", { className: "action-buttons", children: (0, jsx_runtime_1.jsx)("button", { onClick: () => setView('PUZZLE_SELECT'), children: "Back to Puzzles" }) })] }))] }), (0, jsx_runtime_1.jsx)("footer", { className: "app-footer", children: (0, jsx_runtime_1.jsx)("p", { children: "Built on Starknet \u2022 \u00A9 2025 MuMu Game" }) }), showSuccessModal && ((0, jsx_runtime_1.jsx)("div", { className: "success-modal", children: (0, jsx_runtime_1.jsxs)("div", { className: "success-modal-content", children: [(0, jsx_runtime_1.jsx)("h2", { children: "\uD83C\uDF89 Puzzle Solved! \uD83C\uDF89" }), (0, jsx_runtime_1.jsx)("p", { children: "Congratulations! You've solved the puzzle." })] }) }))] }));
};
exports.default = App;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3NheWFudGFucGFsMTAwL0Rlc2t0b3AvTXVtdS0tb25jaGFpbi1wdXp6bGUtZ2FtZS9mcm9udGVuZC9zcmMvQXBwLnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFBQSxjQUFjO0FBQ2QsaUNBQW1EO0FBQ25ELHNEQUErQztBQUMvQyxnRUFBeUQ7QUFDekQsOERBQXVEO0FBQ3ZELDRCQUEwQjtBQUUxQixNQUFNLFdBQVcsR0FBRztJQUNsQixXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM3QixVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QixRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUM7Q0FDbEIsQ0FBQztBQUlGLE1BQU0sR0FBRyxHQUFhLEdBQUcsRUFBRTtJQUN6QixNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBVSxlQUFlLENBQUMsQ0FBQztJQUMzRCxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsOEJBQThCO0lBQzFHLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFNLElBQUksQ0FBQyxDQUFDO0lBQ3hELE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUNoRSxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBZ0IsSUFBSSxDQUFDLENBQUM7SUFFeEQsOERBQThEO0lBQzlELElBQUEsaUJBQVMsRUFBQyxHQUFHLEVBQUU7UUFDYixJQUFJLGdCQUFnQixLQUFLLElBQUksRUFBRSxDQUFDO1lBQzlC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MC9EZXNrdG9wL011bXUtLW9uY2hhaW4tcHV6emxlLWdhbWUvZnJvbnRlbmQvc3JjL0FwcC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL0FwcC50c3hcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEdhbWVCb2FyZCBmcm9tICcuL2NvbXBvbmVudHMvR2FtZUJvYXJkJztcbmltcG9ydCBQdXp6bGVTZWxlY3RvciBmcm9tICcuL2NvbXBvbmVudHMvUHV6emxlU2VsZWN0b3InO1xuaW1wb3J0IFB1enpsZUNyZWF0b3IgZnJvbSAnLi9jb21wb25lbnRzL1B1enpsZUNyZWF0b3InO1xuaW1wb3J0ICcuL3N0eWxlcy9BcHAuY3NzJztcblxuY29uc3QgTU9DS19QVVpaTEUgPSB7XG4gIGluaXRpYWxHcmlkOiBbWzAsIDFdLCBbMSwgMF1dLFxuICB0YXJnZXRHcmlkOiBbWzEsIDFdLCBbMSwgMV1dLFxuICBmb3JtdWxhczogWydBK0InXSxcbn07XG5cbnR5cGUgQXBwVmlldyA9ICdQVVpaTEVfU0VMRUNUJyB8ICdQVVpaTEVfUExBWScgfCAnUFVaWkxFX0NSRUFURSc7XG5cbmNvbnN0IEFwcDogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IFt2aWV3LCBzZXRWaWV3XSA9IHVzZVN0YXRlPEFwcFZpZXc+KCdQVVpaTEVfU0VMRUNUJyk7XG4gIGNvbnN0IFtzZWxlY3RlZFB1enpsZUlkLCBzZXRTZWxlY3RlZFB1enpsZUlkXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KDEpOyAvLyBEZWZhdWx0IHRvIHB1enpsZSAxIGZvciBkZXZcbiAgY29uc3QgW3B1enpsZURhdGEsIHNldFB1enpsZURhdGFdID0gdXNlU3RhdGU8YW55PihudWxsKTtcbiAgY29uc3QgW3Nob3dTdWNjZXNzTW9kYWwsIHNldFNob3dTdWNjZXNzTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIC8vIEFsd2F5cyB1c2UgYmFja2VuZCBvciBtb2NrIGRhdGEsIHdpdGggcm9idXN0IGVycm9yIGhhbmRsaW5nXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlbGVjdGVkUHV6emxlSWQgIT09IG51bGwpIHtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wdXp6bGUvJHtzZWxlY3RlZFB1enpsZUlkfWApXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcignQmFja2VuZCBlcnJvcicpO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICBzZXRQdXp6bGVEYXRhKHtcbiAgICAgICAgICAgIGluaXRpYWxHcmlkOiBkYXRhLmluaXRpYWxfZ3JpZCxcbiAgICAgICAgICAgIHRhcmdldEdyaWQ6IGRhdGEudGFyZ2V0X2dyaWQsXG4gICAgICAgICAgICBmb3JtdWxhczogZGF0YS5mb3JtdWxhcyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRWaWV3KCdQVVpaTEVfUExBWScpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhbGxpbmcgYmFjayB0byBtb2NrIHB1enpsZTonLCBlcnIpO1xuICAgICAgICAgIHNldFB1enpsZURhdGEoTU9DS19QVVpaTEUpO1xuICAgICAgICAgIHNldFZpZXcoJ1BVWlpMRV9QTEFZJyk7XG4gICAgICAgICAgc2V0RXJyb3IoJ0JhY2tlbmQgdW5hdmFpbGFibGUsIHVzaW5nIG1vY2sgcHV6emxlLicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZFB1enpsZUlkXSk7XG5cbiAgY29uc3QgaGFuZGxlUHV6emxlU2VsZWN0ID0gKHB1enpsZUlkOiBudW1iZXIpID0+IHNldFNlbGVjdGVkUHV6emxlSWQocHV6emxlSWQpO1xuICBjb25zdCBoYW5kbGVQdXp6bGVTb2x2ZWQgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1N1Y2Nlc3NNb2RhbCh0cnVlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldFNob3dTdWNjZXNzTW9kYWwoZmFsc2UpO1xuICAgICAgc2V0VmlldygnUFVaWkxFX1NFTEVDVCcpO1xuICAgICAgc2V0U2VsZWN0ZWRQdXp6bGVJZCgxKTsgLy8gQWx3YXlzIGRlZmF1bHQgdG8gcHV6emxlIDEgZm9yIGRldlxuICAgICAgc2V0UHV6emxlRGF0YShudWxsKTtcbiAgICB9LCAzMDAwKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwLWNvbnRhaW5lclwiIGRhdGEtdGVzdGlkPVwiYXBwLWNvbnRhaW5lclwiPlxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJhcHAtaGVhZGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBwLXRpdGxlXCIgb25DbGljaz17KCkgPT4gc2V0VmlldygnUFVaWkxFX1NFTEVDVCcpfT5NdU11IEdhbWU8L2Rpdj5cbiAgICAgICAgPG5hdiBjbGFzc05hbWU9XCJhcHAtbmF2XCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXt2aWV3ID09PSAnUFVaWkxFX1NFTEVDVCcgPyAnYWN0aXZlJyA6ICcnfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0VmlldygnUFVaWkxFX1NFTEVDVCcpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFBsYXlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9e3ZpZXcgPT09ICdQVVpaTEVfQ1JFQVRFJyA/ICdhY3RpdmUnIDogJyd9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRWaWV3KCdQVVpaTEVfQ1JFQVRFJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ3JlYXRlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvbmF2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcC10b2dnbGVzXCI+XG4gICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInRvZ2dsZS1iYWNrZW5kXCIgb25DbGljaz17KCkgPT4ge319PkJhY2tlbmQvTW9jazwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJ0b2dnbGUtZGFya21vZGVcIiBvbkNsaWNrPXsoKSA9PiB7fX0+RGFyayBNb2RlPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oZWFkZXI+XG4gICAgICA8bWFpbiBjbGFzc05hbWU9XCJhcHAtY29udGVudFwiPlxuICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCIgc3R5bGU9e3sgY29sb3I6ICdyZWQnLCBtYXJnaW5Cb3R0b206IDE2IH19PntlcnJvcn08L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAge3ZpZXcgPT09ICdQVVpaTEVfU0VMRUNUJyAmJiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxQdXp6bGVTZWxlY3RvciBvblNlbGVjdFB1enpsZT17aGFuZGxlUHV6emxlU2VsZWN0fSAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uc1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXcoJ1BVWlpMRV9DUkVBVEUnKX0+Q3JlYXRlIFlvdXIgT3duIFB1enpsZTwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG4gICAgICAgIHt2aWV3ID09PSAnUFVaWkxFX1BMQVknICYmICFwdXp6bGVEYXRhICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmdcIj5Mb2FkaW5nIHB1enpsZS4uLjwvZGl2PlxuICAgICAgICApfVxuICAgICAgICB7dmlldyA9PT0gJ1BVWlpMRV9QTEFZJyAmJiBwdXp6bGVEYXRhICYmIChcbiAgICAgICAgICA8R2FtZUJvYXJkXG4gICAgICAgICAgICBwdXp6bGVJZD17c2VsZWN0ZWRQdXp6bGVJZCF9XG4gICAgICAgICAgICBpbml0aWFsR3JpZD17cHV6emxlRGF0YS5pbml0aWFsR3JpZH1cbiAgICAgICAgICAgIHRhcmdldEdyaWQ9e3B1enpsZURhdGEudGFyZ2V0R3JpZH1cbiAgICAgICAgICAgIGZvcm11bGFzPXtwdXp6bGVEYXRhLmZvcm11bGFzfVxuICAgICAgICAgICAgb25Tb2x2ZT17aGFuZGxlUHV6emxlU29sdmVkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHt2aWV3ID09PSAnUFVaWkxFX0NSRUFURScgJiYgKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8UHV6emxlQ3JlYXRvciAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uc1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXcoJ1BVWlpMRV9TRUxFQ1QnKX0+QmFjayB0byBQdXp6bGVzPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvbWFpbj5cbiAgICAgIDxmb290ZXIgY2xhc3NOYW1lPVwiYXBwLWZvb3RlclwiPlxuICAgICAgICA8cD5CdWlsdCBvbiBTdGFya25ldCDigKIgwqkgMjAyNSBNdU11IEdhbWU8L3A+XG4gICAgICA8L2Zvb3Rlcj5cbiAgICAgIHtzaG93U3VjY2Vzc01vZGFsICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdWNjZXNzLW1vZGFsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdWNjZXNzLW1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxoMj7wn46JIFB1enpsZSBTb2x2ZWQhIPCfjok8L2gyPlxuICAgICAgICAgICAgPHA+Q29uZ3JhdHVsYXRpb25zISBZb3UndmUgc29sdmVkIHRoZSBwdXp6bGUuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBcHA7XG4iXSwidmVyc2lvbiI6M30=