f58c41f5fae75e64331198de84810288
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const useStarknet_1 = require("../hooks/useStarknet");
const GameTypes_1 = require("../types/GameTypes"); // Ensure this path is correct or update it to the correct path
require("../styles/PuzzleCreator.css");
const GRID_SIZE = 10; // Define GRID_SIZE with an appropriate value
const PuzzleCreator = () => {
    const { account, contract, isConnecting, connectWallet } = (0, useStarknet_1.useStarknet)();
    const [puzzleName, setPuzzleName] = (0, react_1.useState)('');
    const [difficulty, setDifficulty] = (0, react_1.useState)(1);
    const [grid, setGrid] = (0, react_1.useState)(Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(GameTypes_1.MatterType.VOID)));
    const [selectedMatterType, setSelectedMatterType] = (0, react_1.useState)(GameTypes_1.MatterType.EARTH);
    const [formulas, setFormulas] = (0, react_1.useState)([]);
    const [currentFormula, setCurrentFormula] = (0, react_1.useState)({
        conditionText: '',
        resultType: GameTypes_1.MatterType.WATER
    });
    const [error, setError] = (0, react_1.useState)(null);
    const [success, setSuccess] = (0, react_1.useState)(null);
    const [submitting, setSubmitting] = (0, react_1.useState)(false);
    const handleElementSelect = (type) => {
        setSelectedMatterType(type);
    };
    const handleGridClick = (x, y) => {
        const newGrid = [...grid];
        newGrid[y][x] = selectedMatterType;
        setGrid(newGrid);
    };
    const getMatterSymbol = (type) => {
        switch (type) {
            case GameTypes_1.MatterType.EARTH: return 'ðŸŸ¤';
            case GameTypes_1.MatterType.WATER: return 'ðŸŸ¦';
            case GameTypes_1.MatterType.FIRE: return 'ðŸŸ¥';
            case GameTypes_1.MatterType.AIR: return 'â¬œ';
            case GameTypes_1.MatterType.VOID: return 'â¬›';
            case GameTypes_1.MatterType.STEAM: return 'ðŸ’¨';
            case GameTypes_1.MatterType.PLANT: return 'ðŸŒ±';
            default: return '?';
        }
    };
    const addFormula = () => {
        try {
            if (!currentFormula.conditionText.trim()) {
                setError('Formula condition cannot be empty');
                return;
            }
            // In a real implementation, you would validate and parse the formula text
            // Here we're simplifying and assuming the text is valid
            const newFormula = {
                condition: parseCondition(currentFormula.conditionText),
                result: currentFormula.resultType
            };
            setFormulas([...formulas, newFormula]);
            setCurrentFormula({
                conditionText: '',
                resultType: GameTypes_1.MatterType.WATER
            });
            setError(null);
        }
        catch (err) {
            setError(`Invalid formula: ${err.message}`);
        }
    };
    const parseCondition = (text) => {
        // This is a simplified parser for demonstration
        // In a real implementation, you'd have a more complex parser
        // Example: "WATER + FIRE" or "EARTH + (WATER * 3)"
        if (text.includes('+')) {
            const [left, right] = text.split('+').map(part => part.trim());
            return {
                operator: '+',
                left: parseCondition(left),
                right: parseCondition(right)
            };
        }
        else if (text.includes('*')) {
            const [element, quantity] = text.split('*').map(part => part.trim());
            return {
                operator: '*',
                left: parseCondition(element),
                quantity: parseInt(quantity)
            };
        }
        else if (text.includes('>')) {
            const [element, quantity] = text.split('>').map(part => part.trim());
            return {
                operator: '>',
                left: parseCondition(element),
                quantity: parseInt(quantity)
            };
        }
        else {
            // Assume it's a simple element type
            switch (text.toUpperCase()) {
                case 'EARTH': return { type: GameTypes_1.MatterType.EARTH };
                case 'WATER': return { type: GameTypes_1.MatterType.WATER };
                case 'FIRE': return { type: GameTypes_1.MatterType.FIRE };
                case 'AIR': return { type: GameTypes_1.MatterType.AIR };
                case 'VOID': return { type: GameTypes_1.MatterType.VOID };
                case 'STEAM': return { type: GameTypes_1.MatterType.STEAM };
                case 'PLANT': return { type: GameTypes_1.MatterType.PLANT };
                default: throw new Error(`Unknown element type: ${text}`);
            }
        }
    };
    const removeFormula = (index) => {
        const newFormulas = [...formulas];
        newFormulas.splice(index, 1);
        setFormulas(newFormulas);
    };
    const submitPuzzle = async () => {
        try {
            setError(null);
            setSuccess(null);
            setSubmitting(true);
            if (!account) {
                throw new Error('Please connect your wallet first');
            }
            if (!puzzleName.trim()) {
                throw new Error('Puzzle name cannot be empty');
            }
            if (formulas.length === 0) {
                throw new Error('Please add at least one transformation formula');
            }
            // Check if any elements are placed on the grid
            const hasElements = grid.some(row => row.some(cell => cell !== GameTypes_1.MatterType.VOID));
            if (!hasElements) {
                throw new Error('Please place at least one element on the grid');
            }
            const gameState = {
                grid,
                history: [grid],
                moves: 0,
            };
            // Send to contract
            const result = await contract.create_puzzle(puzzleName, difficulty, gameState, formulas);
            if (result.success) {
                setSuccess(`Puzzle created successfully! Puzzle ID: ${result.puzzleId}`);
                // Reset form
                setPuzzleName('');
                setDifficulty(1);
                setGrid(Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(GameTypes_1.MatterType.VOID)));
                setFormulas([]);
            }
            else {
                throw new Error('Failed to create puzzle');
            }
        }
        catch (err) {
            console.error('Error creating puzzle:', err);
            setError(err.message || 'Failed to create puzzle');
        }
        finally {
            setSubmitting(false);
        }
    };
    if (!account) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "wallet-connect-container", children: [(0, jsx_runtime_1.jsx)("h2", { children: "Connect Your Wallet" }), (0, jsx_runtime_1.jsx)("p", { children: "Please connect your Starknet wallet to create puzzles" }), (0, jsx_runtime_1.jsx)("button", { className: "connect-button", onClick: connectWallet, disabled: isConnecting, children: isConnecting ? 'Connecting...' : 'Connect Wallet' })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "puzzle-creator", children: [(0, jsx_runtime_1.jsx)("h2", { children: "Create New Puzzle" }), error && (0, jsx_runtime_1.jsx)("div", { className: "error-message", children: error }), success && (0, jsx_runtime_1.jsx)("div", { className: "success-message", children: success }), (0, jsx_runtime_1.jsxs)("div", { className: "creator-form", children: [(0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "puzzleName", children: "Puzzle Name:" }), (0, jsx_runtime_1.jsx)("input", { type: "text", id: "puzzleName", value: puzzleName, onChange: (e) => setPuzzleName(e.target.value), placeholder: "Enter a name for your puzzle" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "form-group", children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "difficulty", children: "Difficulty Level:" }), (0, jsx_runtime_1.jsxs)("select", { id: "difficulty", value: difficulty, onChange: (e) => setDifficulty(parseInt(e.target.value)), children: [(0, jsx_runtime_1.jsx)("option", { value: 1, children: "Easy" }), (0, jsx_runtime_1.jsx)("option", { value: 2, children: "Medium" }), (0, jsx_runtime_1.jsx)("option", { value: 3, children: "Hard" }), (0, jsx_runtime_1.jsx)("option", { value: 4, children: "Expert" })] })] })] }), (0, jsx_runtime_1.jsx)("h3", { children: "Design Initial Grid" }), (0, jsx_runtime_1.jsxs)("div", { className: "element-selector", children: [(0, jsx_runtime_1.jsx)("div", { className: "selector-label", children: "Select Matter Type:" }), (0, jsx_runtime_1.jsx)("div", { className: "element-buttons", children: [
                            GameTypes_1.MatterType.VOID,
                            GameTypes_1.MatterType.EARTH,
                            GameTypes_1.MatterType.WATER,
                            GameTypes_1.MatterType.FIRE,
                            GameTypes_1.MatterType.AIR
                        ].map((type) => ((0, jsx_runtime_1.jsx)("button", { className: `element-button ${selectedMatterType === type ? 'selected' : ''}`, onClick: () => handleElementSelect(type), children: getMatterSymbol(type) }, type))) })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid-creator", children: grid.map((row, y) => ((0, jsx_runtime_1.jsx)("div", { className: "grid-row", children: row.map((cell, x) => ((0, jsx_runtime_1.jsx)("div", { className: "grid-cell", onClick: () => handleGridClick(x, y), children: getMatterSymbol(cell) }, `${x}-${y}`))) }, y))) }), (0, jsx_runtime_1.jsx)("h3", { children: "Add Transformation Formulas" }), (0, jsx_runtime_1.jsxs)("div", { className: "formula-creator", children: [(0, jsx_runtime_1.jsxs)("div", { className: "formula-input", children: [(0, jsx_runtime_1.jsx)("input", { type: "text", value: currentFormula.conditionText, onChange: (e) => setCurrentFormula({
                                    ...currentFormula,
                                    conditionText: e.target.value
                                }), placeholder: "e.g., WATER + FIRE or EARTH + (WATER * 3)" }), (0, jsx_runtime_1.jsx)("span", { className: "formula-arrow", children: "\u2192" }), (0, jsx_runtime_1.jsx)("select", { value: currentFormula.resultType, onChange: (e) => setCurrentFormula({
                                    ...currentFormula,
                                    resultType: parseInt(e.target.value)
                                }), children: [
                                    GameTypes_1.MatterType.EARTH,
                                    GameTypes_1.MatterType.WATER,
                                    GameTypes_1.MatterType.FIRE,
                                    GameTypes_1.MatterType.AIR,
                                    GameTypes_1.MatterType.STEAM,
                                    GameTypes_1.MatterType.PLANT
                                ].map((type) => ((0, jsx_runtime_1.jsxs)("option", { value: type, children: [getMatterSymbol(type), " ", GameTypes_1.MatterType[type]] }, type))) }), (0, jsx_runtime_1.jsx)("button", { onClick: addFormula, className: "add-formula-button", children: "Add" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "formula-list", children: [formulas.length === 0 && ((0, jsx_runtime_1.jsx)("p", { className: "no-formulas", children: "No formulas added yet." })), formulas.map((formula, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "formula-item", children: [(0, jsx_runtime_1.jsx)("span", { className: "formula-condition", children: JSON.stringify(formula.condition) }), (0, jsx_runtime_1.jsx)("span", { className: "formula-arrow", children: "\u2192" }), (0, jsx_runtime_1.jsx)("span", { className: "formula-result", children: typeof formula.result === 'number' ? getMatterSymbol(formula.result) : '?' }), (0, jsx_runtime_1.jsx)("button", { onClick: () => removeFormula(index), className: "remove-formula-button", children: "\u00D7" })] }, index)))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "submit-section", children: [(0, jsx_runtime_1.jsx)("button", { onClick: submitPuzzle, disabled: submitting, className: "submit-button", children: submitting ? 'Creating...' : 'Create Puzzle' }), (0, jsx_runtime_1.jsx)("p", { className: "note", children: "Note: Creating a puzzle requires a small gas fee on Starknet." })] })] }));
};
exports.default = PuzzleCreator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3NheWFudGFucGFsMTAwL0Rlc2t0b3AvTXVtdS0tb25jaGFpbi1wdXp6bGUtZ2FtZS9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9QdXp6bGVDcmVhdG9yLnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBd0M7QUFDeEMsc0RBQW1EO0FBQ25ELGtEQUFvRSxDQUFDLCtEQUErRDtBQUNwSSx1Q0FBcUM7QUFFckMsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDLENBQUMsNkNBQTZDO0FBT25FLE1BQU0sYUFBYSxHQUFhLEdBQUcsRUFBRTtJQUNuQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLEdBQUcsSUFBQSx5QkFBVyxHQUFFLENBQUM7SUFDekUsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDakQsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEQsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQzlCLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsc0JBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUM5RSxDQUFDO0lBQ0YsTUFBTSxDQUFDLGtCQUFrQixFQUFFLHFCQUFxQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFhLHNCQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0YsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQVksRUFBRSxDQUFDLENBQUM7SUFDeEQsTUFBTSxDQUFDLGNBQWMsRUFBRSxpQkFBaUIsQ0FBQyxHQUFHLElBQUEsZ0JB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Z0IsWUFDN0IsT0FBTyxPQUFPLENBQUMsTUFBTSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUN0RSxFQUNQLG1DQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQ25DLFNBQVMsRUFBQyx1QkFBdUIsdUJBRzFCLEtBZEQsS0FBSyxDQWVULENBQ1AsQ0FBQyxJQUNFLElBQ0YsRUFFTixpQ0FBSyxTQUFTLEVBQUMsZ0JBQWdCLGFBQzdCLG1DQUNFLE9BQU8sRUFBRSxZQUFZLEVBQ3JCLFFBQVEsRUFBRSxVQUFVLEVBQ3BCLFNBQVMsRUFBQyxlQUFlLFlBRXhCLFVBQVUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxlQUFlLEdBQ3RDLEVBQ1QsOEJBQUcsU0FBUyxFQUFDLE1BQU0sOEVBRWYsSUFDQSxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQTtBQUVELGtCQUFlLGFBQWEsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2F5YW50YW5wYWwxMDAvRGVza3RvcC9NdW11LS1vbmNoYWluLXB1enpsZS1nYW1lL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL1B1enpsZUNyZWF0b3IudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVN0YXJrbmV0IH0gZnJvbSAnLi4vaG9va3MvdXNlU3RhcmtuZXQnO1xuaW1wb3J0IHsgTWF0dGVyVHlwZSwgRm9ybXVsYSwgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMvR2FtZVR5cGVzJzsgLy8gRW5zdXJlIHRoaXMgcGF0aCBpcyBjb3JyZWN0IG9yIHVwZGF0ZSBpdCB0byB0aGUgY29ycmVjdCBwYXRoXG5pbXBvcnQgJy4uL3N0eWxlcy9QdXp6bGVDcmVhdG9yLmNzcyc7XG5cbmNvbnN0IEdSSURfU0laRSA9IDEwOyAvLyBEZWZpbmUgR1JJRF9TSVpFIHdpdGggYW4gYXBwcm9wcmlhdGUgdmFsdWVcblxuZXhwb3J0IGludGVyZmFjZSBDb250cmFjdCB7XG4gIC8vIEFkZCBvdGhlciBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGhlcmVcbiAgY3JlYXRlX3B1enpsZShwdXp6bGVOYW1lOiBzdHJpbmcsIGRpZmZpY3VsdHk6IG51bWJlciwgZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGZvcm11bGFzOiBGb3JtdWxhW10pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgcHV6emxlSWQ6IHN0cmluZyB9Pjtcbn1cblxuY29uc3QgUHV6emxlQ3JlYXRvcjogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYWNjb3VudCwgY29udHJhY3QsIGlzQ29ubmVjdGluZywgY29ubmVjdFdhbGxldCB9ID0gdXNlU3RhcmtuZXQoKTtcbiAgY29uc3QgW3B1enpsZU5hbWUsIHNldFB1enpsZU5hbWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZGlmZmljdWx0eSwgc2V0RGlmZmljdWx0eV0gPSB1c2VTdGF0ZSgxKTtcbiAgY29uc3QgW2dyaWQsIHNldEdyaWRdID0gdXNlU3RhdGU8TWF0dGVyVHlwZVtdW10+KFxuICAgIEFycmF5KEdSSURfU0laRSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkoR1JJRF9TSVpFKS5maWxsKE1hdHRlclR5cGUuVk9JRCkpXG4gICk7XG4gIGNvbnN0IFtzZWxlY3RlZE1hdHRlclR5cGUsIHNldFNlbGVjdGVkTWF0dGVyVHlwZV0gPSB1c2VTdGF0ZTxNYXR0ZXJUeXBlPihNYXR0ZXJUeXBlLkVBUlRIKTtcbiAgY29uc3QgW2Zvcm11bGFzLCBzZXRGb3JtdWxhc10gPSB1c2VTdGF0ZTxGb3JtdWxhW10+KFtdKTtcbiAgY29uc3QgW2N1cnJlbnRGb3JtdWxhLCBzZXRDdXJyZW50Rm9ybXVsYV0gPSB1c2VTdGF0ZTx7XG4gICAgY29uZGl0aW9uVGV4dDogc3RyaW5nO1xuICAgIHJlc3VsdFR5cGU6IE1hdHRlclR5cGU7XG4gIH0+KHtcbiAgICBjb25kaXRpb25UZXh0OiAnJyxcbiAgICByZXN1bHRUeXBlOiBNYXR0ZXJUeXBlLldBVEVSXG4gIH0pO1xuICBcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3N1Y2Nlc3MsIHNldFN1Y2Nlc3NdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzdWJtaXR0aW5nLCBzZXRTdWJtaXR0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBoYW5kbGVFbGVtZW50U2VsZWN0ID0gKHR5cGU6IE1hdHRlclR5cGUpID0+IHtcbiAgICBzZXRTZWxlY3RlZE1hdHRlclR5cGUodHlwZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlR3JpZENsaWNrID0gKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbmV3R3JpZCA9IFsuLi5ncmlkXTtcbiAgICBuZXdHcmlkW3ldW3hdID0gc2VsZWN0ZWRNYXR0ZXJUeXBlO1xuICAgIHNldEdyaWQobmV3R3JpZCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0TWF0dGVyU3ltYm9sID0gKHR5cGU6IE1hdHRlclR5cGUpOiBzdHJpbmcgPT4ge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBNYXR0ZXJUeXBlLkVBUlRIOiByZXR1cm4gJ/Cfn6QnO1xuICAgICAgY2FzZSBNYXR0ZXJUeXBlLldBVEVSOiByZXR1cm4gJ/Cfn6YnO1xuICAgICAgY2FzZSBNYXR0ZXJUeXBlLkZJUkU6IHJldHVybiAn8J+fpSc7XG4gICAgICBjYXNlIE1hdHRlclR5cGUuQUlSOiByZXR1cm4gJ+KsnCc7XG4gICAgICBjYXNlIE1hdHRlclR5cGUuVk9JRDogcmV0dXJuICfirJsnO1xuICAgICAgY2FzZSBNYXR0ZXJUeXBlLlNURUFNOiByZXR1cm4gJ/CfkqgnO1xuICAgICAgY2FzZSBNYXR0ZXJUeXBlLlBMQU5UOiByZXR1cm4gJ/CfjLEnO1xuICAgICAgZGVmYXVsdDogcmV0dXJuICc/JztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWRkRm9ybXVsYSA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjdXJyZW50Rm9ybXVsYS5jb25kaXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgICBzZXRFcnJvcignRm9ybXVsYSBjb25kaXRpb24gY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB5b3Ugd291bGQgdmFsaWRhdGUgYW5kIHBhcnNlIHRoZSBmb3JtdWxhIHRleHRcbiAgICAgIC8vIEhlcmUgd2UncmUgc2ltcGxpZnlpbmcgYW5kIGFzc3VtaW5nIHRoZSB0ZXh0IGlzIHZhbGlkXG4gICAgICBjb25zdCBuZXdGb3JtdWxhOiBGb3JtdWxhID0ge1xuICAgICAgICBjb25kaXRpb246IHBhcnNlQ29uZGl0aW9uKGN1cnJlbnRGb3JtdWxhLmNvbmRpdGlvblRleHQpLFxuICAgICAgICByZXN1bHQ6IGN1cnJlbnRGb3JtdWxhLnJlc3VsdFR5cGVcbiAgICAgIH07XG5cbiAgICAgIHNldEZvcm11bGFzKFsuLi5mb3JtdWxhcywgbmV3Rm9ybXVsYV0pO1xuICAgICAgc2V0Q3VycmVudEZvcm11bGEoe1xuICAgICAgICBjb25kaXRpb25UZXh0OiAnJyxcbiAgICAgICAgcmVzdWx0VHlwZTogTWF0dGVyVHlwZS5XQVRFUlxuICAgICAgfSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgc2V0RXJyb3IoYEludmFsaWQgZm9ybXVsYTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcGFyc2VDb25kaXRpb24gPSAodGV4dDogc3RyaW5nKTogYW55ID0+IHtcbiAgICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBwYXJzZXIgZm9yIGRlbW9uc3RyYXRpb25cbiAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHlvdSdkIGhhdmUgYSBtb3JlIGNvbXBsZXggcGFyc2VyXG4gICAgXG4gICAgLy8gRXhhbXBsZTogXCJXQVRFUiArIEZJUkVcIiBvciBcIkVBUlRIICsgKFdBVEVSICogMylcIlxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCcrJykpIHtcbiAgICAgIGNvbnN0IFtsZWZ0LCByaWdodF0gPSB0ZXh0LnNwbGl0KCcrJykubWFwKHBhcnQgPT4gcGFydC50cmltKCkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3BlcmF0b3I6ICcrJyxcbiAgICAgICAgbGVmdDogcGFyc2VDb25kaXRpb24obGVmdCksXG4gICAgICAgIHJpZ2h0OiBwYXJzZUNvbmRpdGlvbihyaWdodClcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCcqJykpIHtcbiAgICAgIGNvbnN0IFtlbGVtZW50LCBxdWFudGl0eV0gPSB0ZXh0LnNwbGl0KCcqJykubWFwKHBhcnQgPT4gcGFydC50cmltKCkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3BlcmF0b3I6ICcqJyxcbiAgICAgICAgbGVmdDogcGFyc2VDb25kaXRpb24oZWxlbWVudCksXG4gICAgICAgIHF1YW50aXR5OiBwYXJzZUludChxdWFudGl0eSlcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCc+JykpIHtcbiAgICAgIGNvbnN0IFtlbGVtZW50LCBxdWFudGl0eV0gPSB0ZXh0LnNwbGl0KCc+JykubWFwKHBhcnQgPT4gcGFydC50cmltKCkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3BlcmF0b3I6ICc+JyxcbiAgICAgICAgbGVmdDogcGFyc2VDb25kaXRpb24oZWxlbWVudCksXG4gICAgICAgIHF1YW50aXR5OiBwYXJzZUludChxdWFudGl0eSlcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFzc3VtZSBpdCdzIGEgc2ltcGxlIGVsZW1lbnQgdHlwZVxuICAgICAgc3dpdGNoICh0ZXh0LnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnRUFSVEgnOiByZXR1cm4geyB0eXBlOiBNYXR0ZXJUeXBlLkVBUlRIIH07XG4gICAgICAgIGNhc2UgJ1dBVEVSJzogcmV0dXJuIHsgdHlwZTogTWF0dGVyVHlwZS5XQVRFUiB9O1xuICAgICAgICBjYXNlICdGSVJFJzogcmV0dXJuIHsgdHlwZTogTWF0dGVyVHlwZS5GSVJFIH07XG4gICAgICAgIGNhc2UgJ0FJUic6IHJldHVybiB7IHR5cGU6IE1hdHRlclR5cGUuQUlSIH07XG4gICAgICAgIGNhc2UgJ1ZPSUQnOiByZXR1cm4geyB0eXBlOiBNYXR0ZXJUeXBlLlZPSUQgfTtcbiAgICAgICAgY2FzZSAnU1RFQU0nOiByZXR1cm4geyB0eXBlOiBNYXR0ZXJUeXBlLlNURUFNIH07XG4gICAgICAgIGNhc2UgJ1BMQU5UJzogcmV0dXJuIHsgdHlwZTogTWF0dGVyVHlwZS5QTEFOVCB9O1xuICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZWxlbWVudCB0eXBlOiAke3RleHR9YCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUZvcm11bGEgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IG5ld0Zvcm11bGFzID0gWy4uLmZvcm11bGFzXTtcbiAgICBuZXdGb3JtdWxhcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHNldEZvcm11bGFzKG5ld0Zvcm11bGFzKTtcbiAgfTtcblxuICBjb25zdCBzdWJtaXRQdXp6bGUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgc2V0U3VjY2VzcyhudWxsKTtcbiAgICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7XG5cbiAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBjb25uZWN0IHlvdXIgd2FsbGV0IGZpcnN0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcHV6emxlTmFtZS50cmltKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQdXp6bGUgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvcm11bGFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBhZGQgYXQgbGVhc3Qgb25lIHRyYW5zZm9ybWF0aW9uIGZvcm11bGEnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IGVsZW1lbnRzIGFyZSBwbGFjZWQgb24gdGhlIGdyaWRcbiAgICAgIGNvbnN0IGhhc0VsZW1lbnRzID0gZ3JpZC5zb21lKHJvdyA9PiByb3cuc29tZShjZWxsID0+IGNlbGwgIT09IE1hdHRlclR5cGUuVk9JRCkpO1xuICAgICAgaWYgKCFoYXNFbGVtZW50cykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBwbGFjZSBhdCBsZWFzdCBvbmUgZWxlbWVudCBvbiB0aGUgZ3JpZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBnYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IHtcbiAgICAgICAgZ3JpZCxcbiAgICAgICAgaGlzdG9yeTogW2dyaWRdLFxuICAgICAgICBtb3ZlczogMCxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNlbmQgdG8gY29udHJhY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyYWN0LmNyZWF0ZV9wdXp6bGUoXG4gICAgICAgIHB1enpsZU5hbWUsXG4gICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgIGdhbWVTdGF0ZSxcbiAgICAgICAgZm9ybXVsYXNcbiAgICAgICk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBzZXRTdWNjZXNzKGBQdXp6bGUgY3JlYXRlZCBzdWNjZXNzZnVsbHkhIFB1enpsZSBJRDogJHtyZXN1bHQucHV6emxlSWR9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCBmb3JtXG4gICAgICAgIHNldFB1enpsZU5hbWUoJycpO1xuICAgICAgICBzZXREaWZmaWN1bHR5KDEpO1xuICAgICAgICBzZXRHcmlkKEFycmF5KEdSSURfU0laRSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkoR1JJRF9TSVpFKS5maWxsKE1hdHRlclR5cGUuVk9JRCkpKTtcbiAgICAgICAgc2V0Rm9ybXVsYXMoW10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHB1enpsZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwdXp6bGU6JywgZXJyKTtcbiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gY3JlYXRlIHB1enpsZScpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKCFhY2NvdW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2FsbGV0LWNvbm5lY3QtY29udGFpbmVyXCI+XG4gICAgICAgIDxoMj5Db25uZWN0IFlvdXIgV2FsbGV0PC9oMj5cbiAgICAgICAgPHA+UGxlYXNlIGNvbm5lY3QgeW91ciBTdGFya25ldCB3YWxsZXQgdG8gY3JlYXRlIHB1enpsZXM8L3A+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgY2xhc3NOYW1lPVwiY29ubmVjdC1idXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9e2Nvbm5lY3RXYWxsZXR9XG4gICAgICAgICAgZGlzYWJsZWQ9e2lzQ29ubmVjdGluZ31cbiAgICAgICAgPlxuICAgICAgICAgIHtpc0Nvbm5lY3RpbmcgPyAnQ29ubmVjdGluZy4uLicgOiAnQ29ubmVjdCBXYWxsZXQnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicHV6emxlLWNyZWF0b3JcIj5cbiAgICAgIDxoMj5DcmVhdGUgTmV3IFB1enpsZTwvaDI+XG4gICAgICBcbiAgICAgIHtlcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLW1lc3NhZ2VcIj57ZXJyb3J9PC9kaXY+fVxuICAgICAge3N1Y2Nlc3MgJiYgPGRpdiBjbGFzc05hbWU9XCJzdWNjZXNzLW1lc3NhZ2VcIj57c3VjY2Vzc308L2Rpdj59XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3JlYXRvci1mb3JtXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwicHV6emxlTmFtZVwiPlB1enpsZSBOYW1lOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICBpZD1cInB1enpsZU5hbWVcIlxuICAgICAgICAgICAgdmFsdWU9e3B1enpsZU5hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFB1enpsZU5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBhIG5hbWUgZm9yIHlvdXIgcHV6emxlXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZGlmZmljdWx0eVwiPkRpZmZpY3VsdHkgTGV2ZWw6PC9sYWJlbD5cbiAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICBpZD1cImRpZmZpY3VsdHlcIlxuICAgICAgICAgICAgdmFsdWU9e2RpZmZpY3VsdHl9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldERpZmZpY3VsdHkocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXsxfT5FYXN5PC9vcHRpb24+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXsyfT5NZWRpdW08L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ezN9PkhhcmQ8L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ezR9PkV4cGVydDwvb3B0aW9uPlxuICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8aDM+RGVzaWduIEluaXRpYWwgR3JpZDwvaDM+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImVsZW1lbnQtc2VsZWN0b3JcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rvci1sYWJlbFwiPlNlbGVjdCBNYXR0ZXIgVHlwZTo8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlbGVtZW50LWJ1dHRvbnNcIj5cbiAgICAgICAgICB7W1xuICAgICAgICAgICAgTWF0dGVyVHlwZS5WT0lELFxuICAgICAgICAgICAgTWF0dGVyVHlwZS5FQVJUSCxcbiAgICAgICAgICAgIE1hdHRlclR5cGUuV0FURVIsXG4gICAgICAgICAgICBNYXR0ZXJUeXBlLkZJUkUsXG4gICAgICAgICAgICBNYXR0ZXJUeXBlLkFJUlxuICAgICAgICAgIF0ubWFwKCh0eXBlKSA9PiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGtleT17dHlwZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZWxlbWVudC1idXR0b24gJHtzZWxlY3RlZE1hdHRlclR5cGUgPT09IHR5cGUgPyAnc2VsZWN0ZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRWxlbWVudFNlbGVjdCh0eXBlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2dldE1hdHRlclN5bWJvbCh0eXBlKX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQtY3JlYXRvclwiPlxuICAgICAgICB7Z3JpZC5tYXAoKHJvdywgeSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXt5fSBjbGFzc05hbWU9XCJncmlkLXJvd1wiPlxuICAgICAgICAgICAge3Jvdy5tYXAoKGNlbGwsIHgpID0+IChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17YCR7eH0tJHt5fWB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZC1jZWxsXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVHcmlkQ2xpY2soeCwgeSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Z2V0TWF0dGVyU3ltYm9sKGNlbGwpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8aDM+QWRkIFRyYW5zZm9ybWF0aW9uIEZvcm11bGFzPC9oMz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybXVsYS1jcmVhdG9yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybXVsYS1pbnB1dFwiPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRGb3JtdWxhLmNvbmRpdGlvblRleHR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEN1cnJlbnRGb3JtdWxhKHtcbiAgICAgICAgICAgICAgLi4uY3VycmVudEZvcm11bGEsXG4gICAgICAgICAgICAgIGNvbmRpdGlvblRleHQ6IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZS5nLiwgV0FURVIgKyBGSVJFIG9yIEVBUlRIICsgKFdBVEVSICogMylcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9ybXVsYS1hcnJvd1wiPuKGkjwvc3Bhbj5cbiAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZvcm11bGEucmVzdWx0VHlwZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q3VycmVudEZvcm11bGEoe1xuICAgICAgICAgICAgICAuLi5jdXJyZW50Rm9ybXVsYSxcbiAgICAgICAgICAgICAgcmVzdWx0VHlwZTogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7W1xuICAgICAgICAgICAgICBNYXR0ZXJUeXBlLkVBUlRILFxuICAgICAgICAgICAgICBNYXR0ZXJUeXBlLldBVEVSLFxuICAgICAgICAgICAgICBNYXR0ZXJUeXBlLkZJUkUsXG4gICAgICAgICAgICAgIE1hdHRlclR5cGUuQUlSLFxuICAgICAgICAgICAgICBNYXR0ZXJUeXBlLlNURUFNLFxuICAgICAgICAgICAgICBNYXR0ZXJUeXBlLlBMQU5UXG4gICAgICAgICAgICBdLm1hcCgodHlwZSkgPT4gKFxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17dHlwZX0gdmFsdWU9e3R5cGV9PlxuICAgICAgICAgICAgICAgIHtnZXRNYXR0ZXJTeW1ib2wodHlwZSl9IHtNYXR0ZXJUeXBlW3R5cGVdfVxuICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkRm9ybXVsYX0gY2xhc3NOYW1lPVwiYWRkLWZvcm11bGEtYnV0dG9uXCI+XG4gICAgICAgICAgICBBZGRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm11bGEtbGlzdFwiPlxuICAgICAgICAgIHtmb3JtdWxhcy5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibm8tZm9ybXVsYXNcIj5ObyBmb3JtdWxhcyBhZGRlZCB5ZXQuPC9wPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2Zvcm11bGFzLm1hcCgoZm9ybXVsYSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwiZm9ybXVsYS1pdGVtXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm11bGEtY29uZGl0aW9uXCI+XG4gICAgICAgICAgICAgICAgey8qIFNpbXBsaWZpZWQgZGlzcGxheSBmb3IgZGVtb25zdHJhdGlvbiAqL31cbiAgICAgICAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkoZm9ybXVsYS5jb25kaXRpb24pfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm11bGEtYXJyb3dcIj7ihpI8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm11bGEtcmVzdWx0XCI+XG4gICAgICAgICAgICAgICAge3R5cGVvZiBmb3JtdWxhLnJlc3VsdCA9PT0gJ251bWJlcicgPyBnZXRNYXR0ZXJTeW1ib2woZm9ybXVsYS5yZXN1bHQpIDogJz8nfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByZW1vdmVGb3JtdWxhKGluZGV4KX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyZW1vdmUtZm9ybXVsYS1idXR0b25cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgw5dcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdWJtaXQtc2VjdGlvblwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17c3VibWl0UHV6emxlfVxuICAgICAgICAgIGRpc2FibGVkPXtzdWJtaXR0aW5nfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInN1Ym1pdC1idXR0b25cIlxuICAgICAgICA+XG4gICAgICAgICAge3N1Ym1pdHRpbmcgPyAnQ3JlYXRpbmcuLi4nIDogJ0NyZWF0ZSBQdXp6bGUnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibm90ZVwiPlxuICAgICAgICAgIE5vdGU6IENyZWF0aW5nIGEgcHV6emxlIHJlcXVpcmVzIGEgc21hbGwgZ2FzIGZlZSBvbiBTdGFya25ldC5cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFB1enpsZUNyZWF0b3I7Il0sInZlcnNpb24iOjN9