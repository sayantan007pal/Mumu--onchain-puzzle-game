be50556f0627604d1ce2e8e7526fe808
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const MatterElement_1 = require("./MatterElement");
const FormulaDisplay_1 = require("./FormulaDisplay");
const useGameState_1 = require("../hooks/useGameState");
require("../styles/GameBoard.css");
const GameBoard = ({ puzzleId, initialGrid, targetGrid, formulas, onSolve }) => {
    const { grid, moves, setGrid, applyMatterTransformation, undoLastMove, resetGrid, isSolved } = (0, useGameState_1.useGameState)(initialGrid, targetGrid);
    const [selectedElement, setSelectedElement] = (0, react_1.useState)(null);
    const [moveCount, setMoveCount] = (0, react_1.useState)(0);
    const [completed, setCompleted] = (0, react_1.useState)(false);
    // Handle element click for local gameplay
    const handleElementClick = (x, y) => {
        if (completed)
            return;
        if (!selectedElement) {
            setSelectedElement({ x, y });
        }
        else {
            // Only allow adjacent moves
            const dx = Math.abs(selectedElement.x - x);
            const dy = Math.abs(selectedElement.y - y);
            if ((dx === 1 && dy === 0) || (dx === 0 && dy === 1)) {
                // Example: swap elements (customize as needed)
                const newGrid = grid.map(row => [...row]);
                const temp = newGrid[selectedElement.y][selectedElement.x];
                newGrid[selectedElement.y][selectedElement.x] = newGrid[y][x];
                newGrid[y][x] = temp;
                setGrid(newGrid);
                setMoveCount(moveCount + 1);
                if (JSON.stringify(newGrid) === JSON.stringify(targetGrid)) {
                    setCompleted(true);
                    onSolve();
                }
            }
            setSelectedElement(null);
        }
    };
    if (!grid)
        return (0, jsx_runtime_1.jsx)("div", { className: "error", children: "No game state available" });
    return ((0, jsx_runtime_1.jsxs)("div", { className: "game-board-container", children: [(0, jsx_runtime_1.jsxs)("div", { className: "game-info", children: [(0, jsx_runtime_1.jsxs)("h2", { children: ["Puzzle #", puzzleId] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Moves: ", moveCount] }), completed && (0, jsx_runtime_1.jsx)("div", { className: "completed-banner", children: "Completed! \uD83C\uDF89" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "formula-section", children: [(0, jsx_runtime_1.jsx)("h3", { children: "Transformation Formulas" }), formulas.map((formula, index) => ((0, jsx_runtime_1.jsx)(FormulaDisplay_1.default, { formula: formula }, index)))] }), (0, jsx_runtime_1.jsx)("div", { className: "game-board", "aria-label": "Game Board", style: {
                    gridTemplateColumns: `repeat(${grid[0].length}, 60px)`,
                    gridTemplateRows: `repeat(${grid.length}, 60px)`
                }, children: grid.map((row, y) => row.map((elementType, x) => ((0, jsx_runtime_1.jsx)(MatterElement_1.default, { type: elementType, x: x, y: y, isSelected: selectedElement?.x === x && selectedElement?.y === y, onClick: () => handleElementClick(x, y) }, `${x}-${y}`)))) }), (0, jsx_runtime_1.jsx)("div", { className: "game-controls", children: (0, jsx_runtime_1.jsx)("button", { onClick: () => {
                        setGrid(initialGrid);
                        setMoveCount(0);
                        setCompleted(false);
                        setSelectedElement(null);
                    }, className: "reset-button", children: "Reset Puzzle" }) })] }));
};
exports.default = GameBoard;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3NheWFudGFucGFsMTAwL0Rlc2t0b3AvTXVtdS0tb25jaGFpbi1wdXp6bGUtZ2FtZS9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9HYW1lQm9hcmQudHN4IiwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUF3QztBQUN4QyxtREFBNEM7QUFDNUMscURBQThDO0FBQzlDLHdEQUFxRDtBQUVyRCxtQ0FBaUM7QUFVakMsTUFBTSxTQUFTLEdBQTZCLENBQUMsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUN2RyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsR0FBRyxJQUFBLDJCQUFZLEVBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ3JJLE1BQU0sQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQWtDLElBQUksQ0FBQyxDQUFDO0lBQzlGLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBRWxELDBDQUEwQztJQUMxQyxNQUFNLGtCQUFrQixHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxFQUFFO1FBQ2xELElBQUksU0FBUztZQUFFLE9BQU87UUFDdEIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3JCLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0IsQ0FBQzthQUFNLENBQUM7WUFDTiw0QkFBNEI7WUFDNUIsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxHQUFHLENB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LGdDQUFLLFNBQVMsRUFBQyxlQUFlLFlBQzVCLG1DQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUU7d0JBQ1osT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO3dCQUNyQixZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ2hCLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDcEIsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNCLENBQUMsRUFDRCxTQUFTLEVBQUMsY0FBYyw2QkFHakIsR0FDTCxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLFNBQVMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvc2F5YW50YW5wYWwxMDAvRGVza3RvcC9NdW11LS1vbmNoYWluLXB1enpsZS1nYW1lL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL0dhbWVCb2FyZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IE1hdHRlckVsZW1lbnQgZnJvbSAnLi9NYXR0ZXJFbGVtZW50JztcbmltcG9ydCBGb3JtdWxhRGlzcGxheSBmcm9tICcuL0Zvcm11bGFEaXNwbGF5JztcbmltcG9ydCB7IHVzZUdhbWVTdGF0ZSB9IGZyb20gJy4uL2hvb2tzL3VzZUdhbWVTdGF0ZSc7XG5pbXBvcnQgeyBNYXR0ZXJUeXBlLCBEaXJlY3Rpb24sIEZvcm11bGEgfSBmcm9tICcuLi90eXBlcy9HYW1lVHlwZXMnO1xuaW1wb3J0ICcuLi9zdHlsZXMvR2FtZUJvYXJkLmNzcyc7XG5cbmludGVyZmFjZSBHYW1lQm9hcmRQcm9wcyB7XG4gIHB1enpsZUlkOiBudW1iZXI7XG4gIGluaXRpYWxHcmlkOiBNYXR0ZXJUeXBlW11bXTtcbiAgdGFyZ2V0R3JpZDogTWF0dGVyVHlwZVtdW107XG4gIGZvcm11bGFzOiBGb3JtdWxhW107XG4gIG9uU29sdmU6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IEdhbWVCb2FyZDogUmVhY3QuRkM8R2FtZUJvYXJkUHJvcHM+ID0gKHsgcHV6emxlSWQsIGluaXRpYWxHcmlkLCB0YXJnZXRHcmlkLCBmb3JtdWxhcywgb25Tb2x2ZSB9KSA9PiB7XG4gIGNvbnN0IHsgZ3JpZCwgbW92ZXMsIHNldEdyaWQsIGFwcGx5TWF0dGVyVHJhbnNmb3JtYXRpb24sIHVuZG9MYXN0TW92ZSwgcmVzZXRHcmlkLCBpc1NvbHZlZCB9ID0gdXNlR2FtZVN0YXRlKGluaXRpYWxHcmlkLCB0YXJnZXRHcmlkKTtcbiAgY29uc3QgW3NlbGVjdGVkRWxlbWVudCwgc2V0U2VsZWN0ZWRFbGVtZW50XSA9IHVzZVN0YXRlPHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbW92ZUNvdW50LCBzZXRNb3ZlQ291bnRdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtjb21wbGV0ZWQsIHNldENvbXBsZXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gSGFuZGxlIGVsZW1lbnQgY2xpY2sgZm9yIGxvY2FsIGdhbWVwbGF5XG4gIGNvbnN0IGhhbmRsZUVsZW1lbnRDbGljayA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xuICAgIGlmIChjb21wbGV0ZWQpIHJldHVybjtcbiAgICBpZiAoIXNlbGVjdGVkRWxlbWVudCkge1xuICAgICAgc2V0U2VsZWN0ZWRFbGVtZW50KHsgeCwgeSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT25seSBhbGxvdyBhZGphY2VudCBtb3Zlc1xuICAgICAgY29uc3QgZHggPSBNYXRoLmFicyhzZWxlY3RlZEVsZW1lbnQueCAtIHgpO1xuICAgICAgY29uc3QgZHkgPSBNYXRoLmFicyhzZWxlY3RlZEVsZW1lbnQueSAtIHkpO1xuICAgICAgaWYgKChkeCA9PT0gMSAmJiBkeSA9PT0gMCkgfHwgKGR4ID09PSAwICYmIGR5ID09PSAxKSkge1xuICAgICAgICAvLyBFeGFtcGxlOiBzd2FwIGVsZW1lbnRzIChjdXN0b21pemUgYXMgbmVlZGVkKVxuICAgICAgICBjb25zdCBuZXdHcmlkID0gZ3JpZC5tYXAocm93ID0+IFsuLi5yb3ddKTtcbiAgICAgICAgY29uc3QgdGVtcCA9IG5ld0dyaWRbc2VsZWN0ZWRFbGVtZW50LnldW3NlbGVjdGVkRWxlbWVudC54XTtcbiAgICAgICAgbmV3R3JpZFtzZWxlY3RlZEVsZW1lbnQueV1bc2VsZWN0ZWRFbGVtZW50LnhdID0gbmV3R3JpZFt5XVt4XTtcbiAgICAgICAgbmV3R3JpZFt5XVt4XSA9IHRlbXA7XG4gICAgICAgIHNldEdyaWQobmV3R3JpZCk7XG4gICAgICAgIHNldE1vdmVDb3VudChtb3ZlQ291bnQgKyAxKTtcbiAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KG5ld0dyaWQpID09PSBKU09OLnN0cmluZ2lmeSh0YXJnZXRHcmlkKSkge1xuICAgICAgICAgIHNldENvbXBsZXRlZCh0cnVlKTtcbiAgICAgICAgICBvblNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNldFNlbGVjdGVkRWxlbWVudChudWxsKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKCFncmlkKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJlcnJvclwiPk5vIGdhbWUgc3RhdGUgYXZhaWxhYmxlPC9kaXY+O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lLWJvYXJkLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lLWluZm9cIj5cbiAgICAgICAgPGgyPlB1enpsZSAje3B1enpsZUlkfTwvaDI+XG4gICAgICAgIDxwPk1vdmVzOiB7bW92ZUNvdW50fTwvcD5cbiAgICAgICAge2NvbXBsZXRlZCAmJiA8ZGl2IGNsYXNzTmFtZT1cImNvbXBsZXRlZC1iYW5uZXJcIj5Db21wbGV0ZWQhIPCfjok8L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybXVsYS1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5UcmFuc2Zvcm1hdGlvbiBGb3JtdWxhczwvaDM+XG4gICAgICAgIHtmb3JtdWxhcy5tYXAoKGZvcm11bGEsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPEZvcm11bGFEaXNwbGF5IGtleT17aW5kZXh9IGZvcm11bGE9e2Zvcm11bGF9IC8+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cImdhbWUtYm9hcmRcIlxuICAgICAgICBhcmlhLWxhYmVsPVwiR2FtZSBCb2FyZFwiXG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogYHJlcGVhdCgke2dyaWRbMF0ubGVuZ3RofSwgNjBweClgLFxuICAgICAgICAgIGdyaWRUZW1wbGF0ZVJvd3M6IGByZXBlYXQoJHtncmlkLmxlbmd0aH0sIDYwcHgpYFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICB7Z3JpZC5tYXAoKHJvdywgeSkgPT5cbiAgICAgICAgICByb3cubWFwKChlbGVtZW50VHlwZSwgeCkgPT4gKFxuICAgICAgICAgICAgPE1hdHRlckVsZW1lbnRcbiAgICAgICAgICAgICAga2V5PXtgJHt4fS0ke3l9YH1cbiAgICAgICAgICAgICAgdHlwZT17ZWxlbWVudFR5cGV9XG4gICAgICAgICAgICAgIHg9e3h9XG4gICAgICAgICAgICAgIHk9e3l9XG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e3NlbGVjdGVkRWxlbWVudD8ueCA9PT0geCAmJiBzZWxlY3RlZEVsZW1lbnQ/LnkgPT09IHl9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUVsZW1lbnRDbGljayh4LCB5KX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSlcbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYW1lLWNvbnRyb2xzXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRHcmlkKGluaXRpYWxHcmlkKTtcbiAgICAgICAgICAgIHNldE1vdmVDb3VudCgwKTtcbiAgICAgICAgICAgIHNldENvbXBsZXRlZChmYWxzZSk7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZEVsZW1lbnQobnVsbCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJyZXNldC1idXR0b25cIlxuICAgICAgICA+XG4gICAgICAgICAgUmVzZXQgUHV6emxlXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lQm9hcmQ7Il0sInZlcnNpb24iOjN9